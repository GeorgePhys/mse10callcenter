<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/pages/templates/template.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich">

	<ui:define name="title">User registration</ui:define>
	<ui:define name="head">
		<!--link rel="stylesheet" type="text/css"
			href="#{facesContext.externalContext.requestContextPath}/css/admin.css" /-->
	</ui:define>
	<ui:define name="body">
		<h:form>
			<rich:dataGrid value="#{forumAction.current.posts}" var="post"
				columns="1" width="600px" border="0">
				<rich:panel bodyClass="pbody">
					<f:facet name="header">
						<h:outputText value="#{post.fromUser.fullName}" />
						<h:commandLink value="Add Comment" action="#{forumAction.addComment(post)}" rendered="#{loginAction.loggedIn}" />
					</f:facet>
					<h:outputText value="#{post.text}" />
					<h:panelGrid columns="1">
						<rich:list value="#{post.comments}" id="commentId"
							var="comment" type="definitions">
							<f:facet name="term">
								<h:panelGroup layout="block">
									<h:outputText value="#{comment.fromUser.fullName}:"
										style="font-weight:bold" />
								</h:panelGroup>
							</f:facet>
							<h:outputText value="#{comment.text}" />
						</rich:list>
					</h:panelGrid>
				</rich:panel>
			</rich:dataGrid>
		</h:form>
	</ui:define>
</ui:composition>
